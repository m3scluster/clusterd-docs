<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Authentication - Apache Mesos</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Fundamentals</li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">1.</strong> Mesos Architecture providing an overview of Mesos concepts</a></li><li class="chapter-item expanded "><a href="presentations.html"><strong aria-hidden="true">2.</strong> Video and Slides of Mesos Presentations</a></li><li class="chapter-item expanded "><a href="versioning.html"><strong aria-hidden="true">3.</strong> Mesos Release and Support Policy</a></li><li class="chapter-item expanded affix "><li class="part-title">Build / Installation</li><li class="chapter-item expanded "><a href="building.html"><strong aria-hidden="true">4.</strong> Building for basic instructions on compiling and installing Mesos.</a></li><li class="chapter-item expanded "><a href="binary-packages.html"><strong aria-hidden="true">5.</strong> Binary Packages for how to use Mesos binary packages.</a></li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">6.</strong> Configuration for build configuration options.</a></li><li class="chapter-item expanded "><a href="cmake.html"><strong aria-hidden="true">7.</strong> CMake for details about using the new CMake build system.</a></li><li class="chapter-item expanded "><a href="windows.html"><strong aria-hidden="true">8.</strong> Windows Support for the state of Windows support in Mesos.</a></li><li class="chapter-item expanded affix "><li class="part-title">Administration</li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">9.</strong> Configuration for command-line arguments.</a></li><li class="chapter-item expanded "><a href="high-availability.html"><strong aria-hidden="true">10.</strong> High Availability Master Setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="replicated-log-internals.html"><strong aria-hidden="true">10.1.</strong> Replicated Log for information on the Mesos replicated log.</a></li></ol></li><li class="chapter-item expanded "><a href="agent-recovery.html"><strong aria-hidden="true">11.</strong> Fault Tolerant Agent Setup</a></li><li class="chapter-item expanded "><a href="framework-rate-limiting.html"><strong aria-hidden="true">12.</strong> Framework Rate Limiting</a></li><li class="chapter-item expanded "><a href="maintenance.html"><strong aria-hidden="true">13.</strong> Maintenance for performing maintenance on a Mesos cluster.</a></li><li class="chapter-item expanded "><a href="upgrades.html"><strong aria-hidden="true">14.</strong> Upgrades for upgrading a Mesos cluster.</a></li><li class="chapter-item expanded "><a href="downgrades.html"><strong aria-hidden="true">15.</strong> Downgrades for downgrading a Mesos cluster.</a></li><li class="chapter-item expanded "><a href="logging.html"><strong aria-hidden="true">16.</strong> Logging</a></li><li class="chapter-item expanded "><a href="monitoring.html"><strong aria-hidden="true">17.</strong> Monitoring / Metrics</a></li><li class="chapter-item expanded "><a href="cli.html"><strong aria-hidden="true">18.</strong> Debugging using the new CLI</a></li><li class="chapter-item expanded "><a href="operational-guide.html"><strong aria-hidden="true">19.</strong> Operational Guide</a></li><li class="chapter-item expanded "><a href="fetcher.html"><strong aria-hidden="true">20.</strong> Fetcher Cache Configuration</a></li><li class="chapter-item expanded "><a href="fault-domains.html"><strong aria-hidden="true">21.</strong> Fault Domains</a></li><li class="chapter-item expanded "><a href="performance-profiling.html"><strong aria-hidden="true">22.</strong> Performance Profiling for debugging performance issues in Mesos.</a></li><li class="chapter-item expanded "><a href="memory-profiling.html"><strong aria-hidden="true">23.</strong> Memory Profiling for debugging potential memory leaks in Mesos.</a></li><li class="chapter-item expanded affix "><li class="part-title">Resource Management</li><li class="chapter-item expanded "><a href="attributes-resources.html"><strong aria-hidden="true">24.</strong> Attributes and Resources for how to describe the agents that comprise a cluster.</a></li><li class="chapter-item expanded "><a href="roles.html"><strong aria-hidden="true">25.</strong> Using Resource Roles</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="weights.html"><strong aria-hidden="true">25.1.</strong> Resource Role Weights for fair sharing.</a></li><li class="chapter-item expanded "><a href="quota.html"><strong aria-hidden="true">25.2.</strong> Resource Role Quota for how to configure Mesos to provide guaranteed resource allocations for use by a role.</a></li><li class="chapter-item expanded "><a href="reservation.html"><strong aria-hidden="true">25.3.</strong> Reservations for how operators and frameworks can reserve resources on individual agents for use by a role.</a></li><li class="chapter-item expanded "><a href="shared-resources.html"><strong aria-hidden="true">25.4.</strong> Shared Resources for how to share persistent volumes between tasks managed by different executors on the same agent.</a></li></ol></li><li class="chapter-item expanded "><a href="oversubscription.html"><strong aria-hidden="true">26.</strong> Oversubscription for how to configure Mesos to take advantage of unused resources to launch “best-effort” tasks.</a></li><li class="chapter-item expanded affix "><li class="part-title">Security</li><li class="chapter-item expanded "><a href="authentication.html" class="active"><strong aria-hidden="true">27.</strong> Authentication</a></li><li class="chapter-item expanded "><a href="authorization.html"><strong aria-hidden="true">28.</strong> Authorization</a></li><li class="chapter-item expanded "><a href="ssl.html"><strong aria-hidden="true">29.</strong> SSL</a></li><li class="chapter-item expanded "><a href="secrets.html"><strong aria-hidden="true">30.</strong> Secrets for managing secrets within Mesos.</a></li><li class="chapter-item expanded affix "><li class="part-title">Containerization</li><li class="chapter-item expanded "><a href="containerizers.html"><strong aria-hidden="true">31.</strong> Containerizer Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="containerizer-internals.html"><strong aria-hidden="true">31.1.</strong> Containerizer Internals for implementation details of containerizers.</a></li><li class="chapter-item expanded "><a href="docker-containerizer.html"><strong aria-hidden="true">31.2.</strong> Docker Containerizer for launching a Docker image as a Task, or as an Executor.</a></li><li class="chapter-item expanded "><a href="mesos-containerizer.html"><strong aria-hidden="true">31.3.</strong> Mesos Containerizer default containerizer, supports both Linux and POSIX systems.</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="container-image.html"><strong aria-hidden="true">31.3.1.</strong> Container Images for supporting container images in Mesos containerizer.</a></li><li class="chapter-item expanded "><a href="isolators/docker-volume.html"><strong aria-hidden="true">31.3.2.</strong> Docker Volume Support</a></li><li class="chapter-item expanded "><a href="gpu-support.html"><strong aria-hidden="true">31.3.3.</strong> Nvidia GPU Support for how to run Mesos with Nvidia GPU support.</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="sandbox.html"><strong aria-hidden="true">32.</strong> Container Sandboxes</a></li><li class="chapter-item expanded "><a href="container-volume.html"><strong aria-hidden="true">33.</strong> Container Volumes</a></li><li class="chapter-item expanded "><a href="nested-container-and-task-group.html"><strong aria-hidden="true">34.</strong> Nested Container and Task Group (Pod)</a></li><li class="chapter-item expanded "><a href="standalone-containers.html"><strong aria-hidden="true">35.</strong> Standalone Containers</a></li><li class="chapter-item expanded affix "><li class="part-title">Networking</li><li class="chapter-item expanded "><a href="networking.html"><strong aria-hidden="true">36.</strong> Networking Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="networking-for-mesos-managed-containers.html"><strong aria-hidden="true">36.1.</strong> Networking in Detail</a></li><li class="chapter-item expanded "><a href="cni.html"><strong aria-hidden="true">36.2.</strong> Container Network Interface (CNI)</a></li><li class="chapter-item expanded "><a href="isolators/network-port-mapping.html"><strong aria-hidden="true">36.3.</strong> Port Mapping Isolator</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Storage</li><li class="chapter-item expanded "><a href="multiple-disk.html"><strong aria-hidden="true">37.</strong> Multiple Disks for how to allow tasks to use multiple isolated disk resources.</a></li><li class="chapter-item expanded "><a href="persistent-volume.html"><strong aria-hidden="true">38.</strong> Persistent Volume for how to allow tasks to access persistent storage resources.</a></li><li class="chapter-item expanded "><a href="csi.html"><strong aria-hidden="true">39.</strong> Container Storage Interface (CSI) Support</a></li><li class="chapter-item expanded affix "><li class="part-title">Scheduler and Executor Development</li><li class="chapter-item expanded "><a href="running-workloads.html"><strong aria-hidden="true">40.</strong> Running Workloads in Mesos explains how a scheduler can specify and run tasks.</a></li><li class="chapter-item expanded "><a href="app-framework-development-guide.html"><strong aria-hidden="true">41.</strong> Framework Development Guide describes how to build applications on top of Mesos.</a></li><li class="chapter-item expanded "><a href="high-availability-framework-guide.html"><strong aria-hidden="true">42.</strong> Guide for Designing Highly Available Mesos Frameworks</a></li><li class="chapter-item expanded "><a href="reconciliation.html"><strong aria-hidden="true">43.</strong> Reconciliation for ensuring a framework’s state remains eventually consistent in the face of failures.</a></li><li class="chapter-item expanded "><a href="task-state-reasons.html"><strong aria-hidden="true">44.</strong> Task State Reasons describes how task state reasons are used in Mesos.</a></li><li class="chapter-item expanded "><a href="health-checks.html"><strong aria-hidden="true">45.</strong> Task Health Checking</a></li><li class="chapter-item expanded "><a href="scheduler-http-api.html"><strong aria-hidden="true">46.</strong> v1 Scheduler HTTP API for communication between schedulers and the Mesos master.</a></li><li class="chapter-item expanded "><a href="executor-http-api.html"><strong aria-hidden="true">47.</strong> v1 Executor HTTP API describes the new HTTP API for communication between executors and the Mesos agent.</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Apache Mesos</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/AVENTER-UG/mesos-docs/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<h2>title: Apache Mesos - Authentication
layout: documentation</h2>
<h1 id="authentication"><a class="header" href="#authentication">Authentication</a></h1>
<p>Authentication permits only trusted entities to interact with a Mesos cluster. Authentication can be used by Mesos in three ways:</p>
<ol>
<li>To require that frameworks be authenticated in order to register with the master.</li>
<li>To require that agents be authenticated in order to register with the master.</li>
<li>To require that operators be authenticated to use many <a href="endpoints/index.html">HTTP endpoints</a>.</li>
</ol>
<p>Authentication is disabled by default. When authentication is enabled, operators
can configure Mesos to either use the default authentication module or to use a
<em>custom</em> authentication module.</p>
<p>The default Mesos authentication module uses the
<a href="http://asg.web.cmu.edu/sasl/">Cyrus SASL</a> library.  SASL is a flexible
framework that allows two endpoints to authenticate with each other using a
variety of methods. By default, Mesos uses
<a href="https://en.wikipedia.org/wiki/CRAM-MD5">CRAM-MD5</a> authentication.</p>
<h2 id="credentials-principals-and-secrets"><a class="header" href="#credentials-principals-and-secrets">Credentials, Principals, and Secrets</a></h2>
<p>When using the default CRAM-MD5 authentication method, an entity that wants to
authenticate with Mesos must provide a <em>credential</em>, which consists of a
<em>principal</em> and a <em>secret</em>. The principal is the identity that the entity would
like to use; the secret is an arbitrary string that is used to verify that
identity. Principals are similar to user names, while secrets are similar to
passwords.</p>
<p>Principals are used primarily for authentication and
<a href="authorization.html">authorization</a>; note that a principal is different from a
framework's <em>user</em>, which is the operating system account used by the agent to
run executors, and the framework's <em><a href="roles.html">roles</a></em>, which are used to
determine which resources a framework can use.</p>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>Authentication is configured by specifying command-line flags when starting the
Mesos master and agent processes. For more information, refer to the
<a href="configuration.html">configuration</a> documentation.</p>
<h3 id="master"><a class="header" href="#master">Master</a></h3>
<ul>
<li>
<p><code>--[no-]authenticate</code> - If <code>true</code>, only authenticated frameworks are allowed
to register. If <code>false</code> (the default), unauthenticated frameworks are also
allowed to register.</p>
</li>
<li>
<p><code>--[no-]authenticate_http_readonly</code> - If <code>true</code>, authentication is required to
make HTTP requests to the read-only HTTP endpoints that support
authentication. If <code>false</code> (the default), these endpoints can be used without
authentication. Read-only endpoints are those which cannot be used to modify
the state of the cluster.</p>
</li>
<li>
<p><code>--[no-]authenticate_http_readwrite</code> - If <code>true</code>, authentication is required
to make HTTP requests to the read-write HTTP endpoints that support
authentication. If <code>false</code> (the default), these endpoints can be used without
authentication. Read-write endpoints are those which can be used to modify the
state of the cluster.</p>
</li>
<li>
<p><code>--[no-]authenticate_agents</code> - If <code>true</code>, only authenticated agents are
allowed to register. If <code>false</code> (the default), unauthenticated agents are also
allowed to register.</p>
</li>
<li>
<p><code>--authentication_v0_timeout</code> - The timeout within which an authentication is
expected to complete against a v0 framework or agent. This does not apply to
the v0 or v1 HTTP APIs.(default: <code>15secs</code>)</p>
</li>
<li>
<p><code>--authenticators</code> - Specifies which authenticator module to use.  The default
is <code>crammd5</code>, but additional modules can be added using the <code>--modules</code>
option.</p>
</li>
<li>
<p><code>--http_authenticators</code> - Specifies which HTTP authenticator module to use.
The default is <code>basic</code> (basic HTTP authentication), but additional modules can
be added using the <code>--modules</code> option.</p>
</li>
<li>
<p><code>--credentials</code> - The path to a text file which contains a list of accepted
credentials.  This may be optional depending on the authenticator being used.</p>
</li>
</ul>
<h3 id="agent"><a class="header" href="#agent">Agent</a></h3>
<ul>
<li>
<p><code>--authenticatee</code> - Analog to the master's <code>--authenticators</code> option to
specify what module to use.  Defaults to <code>crammd5</code>.</p>
</li>
<li>
<p><code>--credential</code> - Just like the master's <code>--credentials</code> option except that
only one credential is allowed. This credential is used to identify the agent
to the master.</p>
</li>
<li>
<p><code>--[no-]authenticate_http_readonly</code> - If <code>true</code>, authentication is required to
make HTTP requests to the read-only HTTP endpoints that support
authentication. If <code>false</code> (the default), these endpoints can be used without
authentication. Read-only endpoints are those which cannot be used to modify
the state of the agent.</p>
</li>
<li>
<p><code>--[no-]authenticate_http_readwrite</code> - If <code>true</code>, authentication is required
to make HTTP requests to the read-write HTTP endpoints that support
authentication. If <code>false</code> (the default), these endpoints can be used without
authentication. Read-write endpoints are those which can be used to modify the
state of the agent. Note that for backward compatibility reasons, the V1
executor API is not affected by this flag.</p>
</li>
<li>
<p><code>--[no-]authenticate_http_executors</code> - If <code>true</code>, authentication is required
to make HTTP requests to the V1 executor API. If <code>false</code> (the default), that
API can be used without authentication. If this flag is <code>true</code> and custom
HTTP authenticators are not specified, then the default <code>JWT</code> authenticator is
loaded to handle executor authentication.</p>
</li>
<li>
<p><code>--http_authenticators</code> - Specifies which HTTP authenticator module to use.
The default is <code>basic</code>, but additional modules can be added using the
<code>--modules</code> option.</p>
</li>
<li>
<p><code>--http_credentials</code> - The path to a text file which contains a list (in JSON
format) of accepted credentials.  This may be optional depending on the
authenticator being used.</p>
</li>
<li>
<p><code>--authentication_backoff_factor</code> - The agent will time out its authentication
with the master based on exponential backoff. The timeout will be randomly
chosen within the range <code>[min, min + factor*2^n]</code> where <code>n</code> is the number of
failed attempts. To tune these parameters, set the
<code>--authentication_timeout_[min|max|factor]</code> flags. (default: 1secs)</p>
</li>
<li>
<p><code>--authentication_timeout_min</code> - The minimum amount of time the agent waits
before retrying authenticating with the master. See
<code>--authentication_backoff_factor</code> for more details. (default: 5secs)</p>
</li>
<li>
<p><code>--authentication_timeout_max</code> - The maximum amount of time the agent waits
before retrying authenticating with the master. See
<code>--authentication_backoff_factor</code> for more details. (default: 1mins)</p>
</li>
</ul>
<h3 id="scheduler-driver"><a class="header" href="#scheduler-driver">Scheduler Driver</a></h3>
<ul>
<li>
<p><code>--authenticatee</code> - Analog to the master's <code>--authenticators</code> option to
specify what module to use.  Defaults to <code>crammd5</code>.</p>
</li>
<li>
<p><code>--authentication_backoff_factor</code> - The scheduler will time out its
authentication with the master based on exponential backoff. The timeout will
be randomly chosen within the range <code>[min, min + factor*2^n]</code> where <code>n</code> is
the number of failed attempts. To tune these parameters, set the
<code>--authentication_timeout_[min|max|factor]</code> flags. (default: 1secs)</p>
</li>
<li>
<p><code>--authentication_timeout_min</code> - The minimum amount of time the scheduler
waits before retrying authenticating with the master. See
<code>--authentication_backoff_factor</code> for more details. (default: 5secs)</p>
</li>
<li>
<p><code>--authentication_timeout_max</code> - The maximum amount of time the scheduler
waits before retrying authenticating with the master. See
<code>--authentication_backoff_factor</code> for more details. (default: 1mins)</p>
</li>
</ul>
<h3 id="multiple-http-authenticators"><a class="header" href="#multiple-http-authenticators">Multiple HTTP Authenticators</a></h3>
<p>Multiple HTTP authenticators may be loaded into the Mesos master and agent. In
order to load multiple authenticators, specify them as a comma-separated list
using the <code>--http_authenticators</code> flag. The authenticators will be called
serially, and the result of the first successful authentication attempt will be
returned.</p>
<p>If you wish to specify the default basic HTTP authenticator in addition to
custom authenticator modules, add the name <code>basic</code> to your authenticator list.
To specify the default JWT HTTP authenticator in addition to custom
authenticator modules, add the name <code>jwt</code> to your authenticator list.</p>
<h3 id="executor"><a class="header" href="#executor">Executor</a></h3>
<p>If HTTP executor authentication is enabled on the agent, then all requests from
HTTP executors must be authenticated. This includes the default executor, HTTP
command executors, and custom HTTP executors. By default, the agent's JSON web
token (JWT) HTTP authenticator is loaded to handle executor authentication on
both the executor and operator API endpoints. Note that command and custom
executors not using the HTTP API will remain unauthenticated.</p>
<p>When a secret key is loaded via the <code>--jwt_secret_key</code> flag, the agent will
generate a default JWT for each executor before it is launched. This token is
passed into the executor's environment via the
<code>MESOS_EXECUTOR_AUTHENTICATION_TOKEN</code> environment variable. In order to
authenticate with the agent, the executor should place this token into the
<code>Authorization</code> header of all its requests as follows:</p>
<pre><code>    Authorization: Bearer MESOS_EXECUTOR_AUTHENTICATION_TOKEN
</code></pre>
<p>In order to upgrade an existing cluster to require executor authentication, the
following procedure should be followed:</p>
<ol>
<li>
<p>Upgrade all agents, and provide each agent with a cryptographic key via the
<code>--jwt_secret_key</code> flag. This key will be used to sign executor
authentication tokens using the HMAC-SHA256 procedure.</p>
</li>
<li>
<p>Before executor authentication can be enabled successfully, all HTTP
executors must have executor authentication tokens in their environment and
support authentication. To accomplish this, executors which were already
running before the upgrade must be restarted. This could either be done all
at once, or the cluster may be left in this intermediate state while
executors gradually turn over.</p>
</li>
<li>
<p>Once all running default/HTTP command executors have been launched by
upgraded agents, and any custom HTTP executors have been upgraded, the agent
processes can be restarted with the <code>--authenticate_http_executors</code> flag set.
This will enable required HTTP executor authentication, and since all
executors now have authentication tokens and support authentication, their
requests to the agent will authenticate successfully.</p>
</li>
</ol>
<p>Note that HTTP executors make use of the agent operator API in order to make
nested container calls. This means that authentication of the v1 agent operator
API should not be enabled (via <code>--authenticate_http_readwrite</code>) when HTTP
executor authentication is disabled, or HTTP executors will not be able to
function correctly.</p>
<h3 id="framework"><a class="header" href="#framework">Framework</a></h3>
<p>If framework authentication is enabled, each framework must be configured to
supply authentication credentials when registering with the Mesos master. How to
configure this differs between frameworks; consult your framework's
documentation for more information.</p>
<p>As a framework developer, supporting authentication is straightforward: the
scheduler driver handles the details of authentication when a <code>Credential</code>
object is passed to its constructor. To enable <a href="authorization.html">authorization</a>
based on the authenticated principal, the framework developer should also copy
the <code>Credential.principal</code> into <code>FrameworkInfo.principal</code> when registering.</p>
<h2 id="cram-md5-example"><a class="header" href="#cram-md5-example">CRAM-MD5 Example</a></h2>
<ol>
<li>
<p>Create the master's credentials file with the following content:</p>
<pre><code> {
   &quot;credentials&quot; : [
     {
       &quot;principal&quot;: &quot;principal1&quot;,
       &quot;secret&quot;: &quot;secret1&quot;
     },
     {
       &quot;principal&quot;: &quot;principal2&quot;,
       &quot;secret&quot;: &quot;secret2&quot;
     }
   ]
 }
</code></pre>
</li>
<li>
<p>Start the master using the credentials file (assuming the file is <code>/home/user/credentials</code>):</p>
<pre><code> ./bin/mesos-master.sh --ip=127.0.0.1 --work_dir=/var/lib/mesos --authenticate --authenticate_agents --credentials=/home/user/credentials
</code></pre>
</li>
<li>
<p>Create another file with a single credential in it (<code>/home/user/agent_credential</code>):</p>
<pre><code> {
   &quot;principal&quot;: &quot;principal1&quot;,
   &quot;secret&quot;: &quot;secret1&quot;
 }
</code></pre>
</li>
<li>
<p>Start the agent:</p>
<pre><code> ./bin/mesos-agent.sh --master=127.0.0.1:5050 --credential=/home/user/agent_credential
</code></pre>
</li>
<li>
<p>Your new agent should have now successfully authenticated with the master.</p>
</li>
<li>
<p>You can test out framework authentication using one of the test frameworks
provided with Mesos as follows:</p>
<pre><code> MESOS_AUTHENTICATE=true DEFAULT_PRINCIPAL=principal2 DEFAULT_SECRET=secret2 ./src/test-framework --master=127.0.0.1:5050
</code></pre>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="oversubscription.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="authorization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="oversubscription.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="authorization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
